/*
 * PaW Carousel - Version: 2.1.2
 * http://picturesandwriting.com
 * Copyright (c) 2014 Shaun Morrison; Licensed: GPL
 * Requires: jQuery v1.7 or later
 * Author: Shaun Morrison
 */
!function($){$.fn.pawCarousel=function(t){var i={carouselItemCls:"paw-carousel-item",carouselItemMediaCls:"paw-carousel-item-media",carouselItemsWrapCls:"paw-carousel-items-wrap",carouselNavItemCls:"paw-carousel-nav-item",nextLinkCls:"paw-carousel-next",prevLinkCls:"paw-carousel-prev",activeCls:"active",croppedCls:"cropped",scaledCls:"scaled",carouselItemSpace:"css",animSpeed:800,alignment:"center",setsEachSide:1,carouselHtType:"shortest",carouselResizeType:"cropped"},e=$.extend({},i,t);return this.each(function(){function t(){xi=window.innerHeight,void 0==xi&&(xi=$(window).height()),Ci=$(window).width()}function i(){G.find("."+V).length&&(gi=!0)}function n(){ri=G.find("."+J)}function a(){ri.find("iframe").addClass(O)}function s(){ri.find("iframe").each(function(){var t=$(this);o(t,!0)})}function r(){oi.each(function(t){var i=$(this),e=i.find("iframe");if(e.length){var n=G.find("."+ai+t);e=n.find("iframe"),o(e)}})}function o(t,i){var e=t.attr(si),n=$i*e;t.attr("height",$i),t.attr("width",n),i&&d(t,n)}function c(t,i){if(i!=Fi){var e=t.find("iframe");if(e.length){var n=e.attr("src");e.attr("src",""),e.attr("src",n)}}}function d(t,i){var e='<div style="width:'+i+"px; height:"+$i+'px" class="'+ti+'"></div>';t.before(e).addClass(ii)}function l(){$i="shortest"==Qi?9999:"longest"==Qi?0:Qi}function f(){ri.addClass(_),oi=G.find("."+_),"css"!=e.carouselItemSpace&&oi.css({"margin-right":Ei})}function u(t){fi=t,fi.siblings().removeClass(X),fi.addClass(X),Fi=parseInt(fi.attr(Bi))}function h(){u(G.find("."+J).first()),v(0),C(0)}function m(t,i){v(t,i),C()}function v(t,i){var e=fi,n=Fi,a=0,s=0;"forwards"==i&&n==Hi?(u(oi.first()),p("last"),w(),s=-ki*Ri,Ai=-ki*Ri+Li):"backwards"==i&&0==n?(u(oi.last()),p("first"),g(),s=-ki-ki*Ri+Gi[Hi].itemWid,Ai=-ki-ki*Ri+Gi[Hi].itemWid+Li):(t>0&&(a=Gi[t-1].itemPosFromStart),u(G.find("."+K+"."+ai+t)),p(),s=-(a+ki*Ri),Ai=s+Li),c(e,n)}function p(t){if("center"==e.alignment){var i=Ii/2;Li=i-Gi[Fi].itemWid/2,"first"==t?Mi=i-Gi[0].itemWid/2:"last"==t&&(Di=i-Gi[Hi].itemWid/2)}else"right"==e.alignment&&(Li=Ii-Gi[Fi].itemWid,"first"==t?Mi=Ii-Gi[0].itemWid:"last"==t&&(Di=Ii-Gi[Hi].itemWid))}function w(){var t=-ki+Gi[Hi].itemWid+Di;li.css({left:t})}function g(){var t=-ki-ki*Ri+Mi;li.css({left:t})}function C(t){t="undefined"!=typeof t?t:Ni,vi=!0,0==t?li.css({left:Ai}):li.stop(!0).animate({left:Ai},Ni)}function x(){oi.each(function(){var t=$(this),i=t.find("."+O);k(t,Hi+=1),I(t,i),y(t),("shortest"==Qi||"tallest"==Qi)&&z(t)})}function I(t,i){if(void 0!=i.attr("width")&&void 0!=i.attr("height"))var e=i.attr("width")/i.attr("height");else var e=t.width()/t.height();e=e.toFixed(3),i.attr(si,e)}function k(t,i){t.attr(Bi,i),t.addClass(ai+i)}function y(t){var i=t.find("img."+O),e=i.attr("data-src-2x");if(mi&&void 0!=e)var n=e;else var n=i.attr("data-src");i.removeAttr("data-src"),i.removeAttr("data-src-2x"),i.attr("src",n)}function W(){ji=li.html(),ji=ji.replace(/ paw-carousel-item-orig/g,"")}function b(){Gi=[],ki=0,("shortest"==Qi&&wi||"tallest"==Qi&&wi)&&l(),oi.each(function(t){var i=$(this);i.width("auto").removeClass(Y),yi=i.width(),S(t,i,yi),H(yi),("shortest"==Qi&&wi||"tallest"==Qi&&wi)&&(i.find("img."+O).removeAttr("height width"),z(i))})}function S(t,i,e){var n=G.find("."+ai+t);e+=Ei,"cropped"==qi&&e>=Ii?(yi=Ii,n.width(yi).addClass(Y),pi=!0):e>=Ii?(yi=Ii,T(i),n.width(yi).addClass(Z),Wi>0&&n.height(Wi),wi=!0):(yi+=Ei,(pi||wi)&&n.removeAttr("style").removeClass(Y))}function T(t){var i=t.find("img."+O);if(i.length){var e=Ii/i.attr(si);Wi=e.toFixed(0)}}function H(t){ki+=t,Gi.push({itemWid:t,itemPosFromStart:ki})}function z(t){var i=t.height(),e=t.find("iframe").length;"shortest"!=Qi||e?"tallest"==Qi&&($i=i>$i?i:$i):$i=$i>i?i:$i}function A(){"shortest"==Qi||"tallest"==Qi?(li.height($i),G.height($i)):(li.height(Qi),G.height(Qi))}function F(t){"before"==t?li.prepend(ji):li.append(ji),Ti++,D()}function L(){"css"==Ei&&(Ei=parseInt(ri.first().css("margin-right"),10))}function M(){if(window.matchMedia){var t=window.matchMedia("only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)");mi=t&&t.matches||window.devicePixelRatio>1?!0:!1}}function D(){Si=ki*Ti,li.width(Si)}function P(){Ii=G.width(),bi=$i}function R(){V.length&&(E(),ci.on("click",function(t){t.preventDefault(),$link=$(this);var i=$link.attr(Bi);Fi!=i&&(gi&&N($link),m(i))}))}function E(){ci.each(function(t){$(this).attr(Bi,t),0==t&&gi&&N($(this))})}function N(t){t.siblings().removeClass(X),t.addClass(X),di=t}function j(){ui.on("click",function(t){t.preventDefault(),Q()}),hi.on("click",function(t){t.preventDefault(),q()})}function Q(){var t=Fi+1;gi&&N(di.next()),t>Hi&&(t=0,gi&&N(ci.first())),m(t,"forwards")}function q(){var t=Fi-1;gi&&N(di.prev()),0>t&&(t=Hi,gi&&N(ci.last())),m(t,"backwards")}function B(){var t=ri.find("img."+O),i=t.length;t.load(function(){Pi++,Pi==i&&setTimeout(function(){fi.addClass(ei),setTimeout(function(){ri.addClass(ei)},800)},500)})}var G=$(this),J=e.carouselItemCls,K=e.carouselItemCls+"-orig",O=e.carouselItemMediaCls,U=e.carouselItemsWrapCls,V=e.carouselNavItemCls,X=e.activeCls,Y=e.croppedCls,Z=e.scaledCls,_="paw-carousel-item-orig",ti="paw-carousel-item-vid-foundation",ii="paw-carousel-item-vid",ei="paw-carousel-item-visible",ni="paw-carousel-crop-comp",ai=J+"-",si="data-paw-orig-ratio",ri=G.find("."+J),oi,ci=G.next().find("."+V),di,li=G.children("."+U),fi,ui=G.find("."+e.nextLinkCls),hi=G.find("."+e.prevLinkCls),mi=!1,vi=!1,pi=!1,wi=!1,gi=!1,Ci,xi,Ii=0,ki=0,yi=0,Wi=0,bi=0,Si=0,Ti=1,Hi=-1,zi=0,Ai=0,Fi=0,Li=0,Mi=0,Di=0,Pi=0,Ri=e.setsEachSide,$i=0,Ei=e.carouselItemSpace,Ni=e.animSpeed,ji,Qi=e.carouselHtType,qi=e.carouselResizeType,Bi="data-paw-item-num",Gi=[];t(),M(),L(),i(),l(),a(),f(),x(),P(),s(),b(),r(),W();for(var Ji=0;Ri>Ji;Ji++)F("before"),F("after");n(),A(),h(),R(),j(),B();var Ki=function(){$(window).one("resize",function(){var i=window.innerHeight?window.innerHeight:$(window).height(),e=$(window).width();(e!=Ci||i!=xi)&&(t(),P(),b(),r(),A(),D(),v(Fi),C(0)),setTimeout(Ki,100)})};Ki()}),this}}(jQuery);